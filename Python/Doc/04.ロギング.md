# 4.ロギングについて

## 4-1.簡単な使い方

```
from logging import getLogger, INFO

logger = getLogger(__name__)
logger.setLevel(INFO)

logger.critical("critical")
logger.error("error")
logger.warning("warning")
logger.info("info")
logger.debug("debug")
```

loggingを誤って使ってしまわないようにインポートは「from logging import getLogger」としている。

### 4-1-1. Debugが出力されない問題について

以下の用に修正すると表示される。
```
from logging import getLogger, StreamHandler, DEBUG

# ロガーの作成
logger = getLogger(__name__)
logger.setLevel(DEBUG)  # ロガーのレベルをDEBUGに設定

# コンソールにログメッセージを表示するハンドラを作成
console_handler = StreamHandler()
console_handler.setLevel(DEBUG)  # ハンドラのレベルをDEBUGに設定

# ハンドラをロガーに追加
logger.addHandler(console_handler)

# ログメッセージの出力
logger.debug("Debug レベルのログメッセージ")
```


ログレベルの標準はWARNINGだが、ログレベルをDEBUGに変更するだけでは表示されない。
ハンドラーが追加されていないのが原因。
ロガーはログレコードを生成する役割を持っているが、それをどのように処理するかはハンドラが担当している。

## 4-2.フォーマットについて

### 4-2-1.basicConfigによるフォーマット指定

```
from logging import getLogger, StreamHandler, DEBUG, Formatter, basicConfig

# ロガーの作成
logger = getLogger(__name__)

basicConfig(level=DEBUG, format="%(asctime)s:%(funcName)s:%(message)s")

# ログメッセージの出力
logger.debug("Debug レベルのログメッセージ")
```

### 4-2-2.ハンドラにフォーマット指定

```
from logging import getLogger, StreamHandler, DEBUG, Formatter

# ロガーの作成
logger = getLogger(__name__)
logger.setLevel(DEBUG)  # ロガーのレベルをDEBUGに設定

# コンソールにログメッセージを表示するハンドラを作成
console_handler = StreamHandler()
format = Formatter("%(asctime)s:%(funcName)s:%(message)s")
console_handler.setFormatter(format)

# ハンドラをロガーに追加
logger.addHandler(console_handler)

# ログメッセージの出力
logger.debug("Debug レベルのログメッセージ")
```

### 4-2-3.フォーマットの内容

formatter = “%(asctime)s:%(levelname)s:%(funcName)s:%(message)s”

formatter = “%(asctime)s:%(levelname)s:%(filename)s(%(lineno)s):%(funcName)s:%(message)s”

詳細は以下のリンクを参照。

https://docs.python.org/ja/3/library/logging.html#logrecord-attributes

「%(levelname)s」がINFOの4文字とDEBUGの５文字でログが見にくくなる。

その場合は「%(levelname)-5s」や「%(levelname)5s」などと文字数を指定する。

マイナスありが左寄せ、マイナスなしが右寄せになる。以下は「%(levelname)-5s」の例。